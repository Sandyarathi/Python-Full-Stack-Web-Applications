{% extends "main.html" %}

{% block content %}

<div class="mdl-grid typography--text-center">
  <header class="mdl-cell mdl-cell--12-col">
    <h1>Welcome to the Movies Catalog</h1>
    <p>Find a plethora of top-rated movie recomendations! Please login to post your favorites!</p>
  </header>
</div>
<div class="mdl-grid">
  {% for movie in movies %}
  <div class="mdl-cell mdl-cell--8-col mdl-cell--6-col-desktop mdl-card mdl-shadow--2dp card-movie">
    <div class="mdl-card__title">
      <h3 class="mdl-card__title-text">{{movie.name}}</h4>
    </div>
    <div class="mdl-card__supporting-text">{{movie.director}}</div>
    <div class="mdl-card__actions mdl-card--border">
      <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{movie.youtube_url}}" target="_blank">Watch Trailer</a>
    </div>
  </div>
  <!-- temporarily removing, may bring back later
  <script>
    // get youtube id from movie.youtube_url
    url = "{{movie.youtube_url}}";
    youtubeIdMatch = url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);
    console.log(youtubeIdMatch[1]);
    var playerId = 'ytplayer' + '{{movie.id}}';
    console.log(playerId);
    $(document).ready(function() {
      var player = new YT.Player(playerId, {
        height: '390',
        width: '640',
        videoId: youtubeIdMatch[1]
      });
    });
  </script>
  -->
  {% endfor %} {% endblock %}
</div>
